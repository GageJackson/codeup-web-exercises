<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>First Mapbox Map</title>
    <!-- Bootstrap Css -->
    <link href="bootstrap-5.2.3-dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Mapbox JS -->
    <script src="mapbox-gl/dist/mapbox-gl.js"></script>
    <!-- Mapbox CSS -->
    <link href="mapbox-gl/dist/mapbox-gl.css" rel="stylesheet" />
    <style>
      #map {
        /* the width and height may be set to any size */
        width: 100%;
        height: 700px;
      }

      .marker {
        mask: url("assets/icons/fire.svg");
        background-size: cover;
        width: 40px;
        height: 45px;
        border-radius: 50%;
        cursor: pointer;
        background-color: red;
        background-repeat: no-repeat;
      }
    </style>
  </head>
  <body class="bg-dark">
    <section class="container row">
      <div class="card m-3 bg-primary text-light col-12">
        <div class="card-header row">
          <h1 class="col-12">My First Mapbox Map!</h1>
          <label for="zoomSelector" class=""></label>
          <select id="zoomSelector" class="col-12 form-select-sm">
            <option value="6">Zoom 06</option>
            <option selected value="12">Zoom 12</option>
            <option value="18">Zoom 18</option>
          </select>
        </div>
        <div class="card-body p-0">
          <div id="map"></div>
          <h2 class="mt-4">Choose a Location</h2>
          <label for="userLocation">Address</label>
          <input id="userLocation" type="text" class="input-group-text" />
          <button
            id="btn-submit-address"
            class="btn btn-light text-primary mt-2"
          >
            Let's Go!
          </button>
        </div>
        <div class="card-footer"></div>
      </div>
    </section>

    <!-- jQuery -->
    <script src="js/jquery-3.6.3.js"></script>
    <script src="js/keys.js"></script>
    <!-- Mapbox Utils JS -->
    <script src="js/mapbox-geocoder-utils.js"></script>
    <!-- Bootstrap JS -->
    <script src="bootstrap-5.2.3-dist/js/bootstrap.min.js"></script>
    <!-- Custom JS -->
    <script src="js/mapbox_maps_api.js"></script>
    <!--<script>
      const zoomLevel = document.querySelector("#zoomSelector");
      const changeLocation = document.querySelector("#btn-submit-address");
      //let pointLocations = [];

      mapboxgl.accessToken = mapboxKey;
      let map = new mapboxgl.Map({
        container: "map", // container ID
        style: "mapbox://styles/gagejackson/clf2s2gln001601qik4wqike1", // style URL
        zoom: 12, // starting zoom
        center: [-95.275, 32.315], // [lng, lat]
      });

      $.ajax("/data/favoriteRestaurants.json").done(function (
        data,
        status,
        jqXhr
      ) {
        createPointsOfInterest(data);
      });

      function createPointsOfInterest(restaurants) {
        restaurants.forEach(function (restaurant) {
          geocode(restaurant.address, mapboxKey).then(function (result) {
            let geoMarker = new mapboxgl.Marker().setLngLat(result).addTo(map);
            let geoMarkerPopup = new mapboxgl.Popup().setHTML(
              createPopupHtml()
            );

            geoMarker.setPopup(geoMarkerPopup);
          });

          function createPopupHtml() {
            let html = "<div class='card'>";
            html +=
              "<div class='card-header bg-primary text-light d-flex justify-content-between'>";
            html += "<h5>" + restaurant.name + "</h5>";
            html += "<span>" + restaurant.rating + "</span>" + "</div>";

            html += "<div class='card-body p-0'>";
            html +=
              "<img src=" +
              restaurant.images[0] +
              " alt='text' style='width: 100%; height: 100%'>" +
              "</div>";

            html += "<div class='card-footer bg-primary'>";
            html += "<p>" + restaurant.description + "</p>";
            html += "<p>5/5</p>" + "</div>";

            return html;
          }
        });
      }

      // Add a new Marker.
      const marker = new mapboxgl.Marker({
        color: "#F84C4C", // color it red
      });

      let counter = 0;
      const counterMax = 70;
      function animateMarker(timestamp) {
        if (counter < counterMax) {
          marker.setLngLat([
            -95.275,
            32.315 + Math.sin(0.015 * timestamp) / 1000,
          ]);

          marker.addTo(map);

          counter++;
          requestAnimationFrame(animateMarker);
        } else {
        }
      }

      changeLocation.addEventListener("click", () => {
        let location = document.querySelector("#userLocation").value;
        geocode(location, mapboxKey).then(function (result) {
          console.log(result);
          //6812 southplace drive, tyler, tx 75703
          //6354 creekview lane, fishers, in 46038
          //map.setCenter(result);
          map.flyTo({ center: result, zoom: 16 });
          let marker = new mapboxgl.Marker().setLngLat(result).addTo(map);
        });
      });

      zoomLevel.addEventListener("change", () => {
        console.log(zoomLevel.value);
        map.setZoom(zoomLevel.value);
      });
      // Start the animation.
      //requestAnimationFrame(animateMarker);
      map.on("load", function () {
        requestAnimationFrame(animateMarker);
      });
      /* var marker = new mapboxgl.Marker()
        .setLngLat([-95.30066320177026, 32.35079556652797])
        .addTo(map);

      var popup = new mapboxgl.Popup()
        .setLngLat([-95.30066320177026, 32.352])
        .setHTML("<p>Codeup Rocks!</p>")
        .addTo(map);

      var alamoPopup = new mapboxgl.Popup().setHTML(
        "<p>Remember The Alamo!</p>"
      );
      marker.setPopup(alamoPopup);
      // reverse geocode method from mapbox-geocoder-utils.js
      reverseGeocode({ lng: -95.30192, lat: 32.35086 }, mapskey).then(function (
        results
      ) {
        // logs the address for The Alamo
        console.log(results);
      });

       */
    </script>
  </body>
</html> -->
  </body>
</html>
